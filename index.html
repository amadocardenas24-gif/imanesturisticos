<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RA Corregida - Video Visible</title>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>

    <style>
        #pantalla-inicio {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: white; z-index: 2000; display: flex;
            flex-direction: column; justify-content: center; align-items: center;
        }
        #btn-whatsapp {
            position: fixed; top: 30px; left: 30px; /* Posición contraria solicitada */
            width: 60px; height: 60px; background-color: #25d366;
            border-radius: 50%; display: none; z-index: 1500;
            justify-content: center; align-items: center;
        }
    </style>
</head>
<body>

    <div id="pantalla-inicio">
        <button id="btn-iniciar" style="padding: 20px; font-size: 20px;">VER VIDEO</button>
    </div>

    <a id="btn-whatsapp" href="https://wa.me/5511969229578" target="_blank">
        <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" style="width: 35px;">
    </a>

    <!-- Escena MindAR con integración A-Frame [2] -->
    <a-scene mindar-image="imageTargetSrc: ./marker.mind; autoStart: true;" vr-mode-ui="enabled: false">
        
        <a-assets>
            <!-- El archivo 'asset' de 1,861 KB identificado en tus fuentes [3] -->
            <video id="videoAsset" src="./asset.mp4" loop playsinline crossorigin="anonymous"></video>
        </a-assets>

        <a-camera position="0 0 0" look-controls="enabled: false">
            <!-- FIX: position="0 0 -1" para que sea visible y shader: flat -->
            <a-video id="videoAR" src="#videoAsset" width="1" height="0.6" 
                     position="0 0 -1" material="shader: flat;" visible="false"></a-video>
        </a-camera>
    </a-scene>

    <script>
        const btnInicia = document.getElementById('btn-iniciar');
        const btnWA = document.getElementById('btn-whatsapp');
        const v = document.getElementById('videoAsset');
        const vAR = document.getElementById('videoAR');

        btnInicia.onclick = () => {
            document.getElementById('pantalla-inicio').style.display = 'none';
            v.play(); // Esto activa el audio
            vAR.setAttribute('visible', 'true'); // ¡Esto activa la imagen!
            btnWA.style.display = 'flex';
        };
    </script>
</body>
</html>
